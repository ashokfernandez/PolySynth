<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PolySynth — Side Effects Audio</title>
    <meta name="description"
        content="PolySynth is a boutique digital polyphonic synthesizer by Side Effects Audio. Experience the engine directly in your browser.">

    <!-- Design System -->
    <link rel="stylesheet" href="design-system.css">

    <style>
        /* ─── Page Specific overrides & Layout ─────────────────── */

        /* Fixed Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            background: rgba(12, 12, 12, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--c-border);
            z-index: 1000;
            display: flex;
            align-items: center;
        }

        .header__inner {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--s-md);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header__logo {
            text-decoration: none;
            font-family: var(--font-brand);
            font-size: 1.5rem;
            background: var(--gradient-se);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header__nav {
            display: flex;
            gap: var(--s-md);
        }

        .header__link {
            text-decoration: none;
            color: var(--c-dim);
            font-size: 0.85rem;
            font-weight: 500;
            transition: color var(--t-fast) var(--ease);
        }

        .header__link:hover {
            color: var(--c-cream);
        }

        /* Hero / Demo Section */
        .hero {
            padding-top: 128px;
            padding-bottom: var(--s-xl);
            background: var(--c-black);
            text-align: center;
        }

        .hero__product-name {
            font-family: var(--font-product);
            font-size: clamp(3rem, 10vw, 6rem);
            color: var(--c-cream);
            line-height: 1;
            margin-bottom: var(--s-md);
            letter-spacing: -0.02em;
        }

        .hero__description {
            max-width: 600px;
            margin: 0 auto var(--s-lg);
            color: var(--c-dim);
            font-size: 1.125rem;
            line-height: 1.6;
            font-weight: 300;
        }

        /* Demo Container - Overhauled for v3 */
        .demo-shell {
            max-width: 1024px;
            margin: 0 auto;
            border-radius: var(--r-lg);
            overflow: hidden;
            border: 1px solid var(--c-border);
            background: #000;
            position: relative;
            box-shadow: 0 40px 100px -20px rgba(0, 0, 0, 0.8);
            aspect-ratio: 4 / 3;
            /* Maintain proportions on mobile */
        }

        @media (min-width: 1025px) {
            .demo-shell {
                aspect-ratio: auto;
                height: 768px;
            }
        }

        .demo-frame {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        /* ─── Content Sections ───────────────────────────────── */

        .section-header {
            margin-bottom: var(--s-lg);
        }

        .section-tag {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--se-purple);
            margin-bottom: var(--s-xs);
            display: block;
        }

        .section-title {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: var(--s-sm);
        }

        /* Download Cards */
        .dl-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--s-md);
        }

        .dl-card {
            background: var(--c-ink);
            border: 1px solid var(--c-border);
            padding: var(--s-md);
            border-radius: var(--r-lg);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            gap: var(--s-md);
            transition: all var(--t-base) var(--ease);
        }

        .dl-card:hover {
            border-color: rgba(255, 255, 255, 0.15);
            background: var(--c-card);
        }

        .dl-card__head {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .dl-card__os {
            font-family: var(--font-product);
            font-size: 1.25rem;
        }

        .dl-card__desc {
            font-size: 0.95rem;
            color: var(--c-dim);
            line-height: 1.5;
        }

        /* Features */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--s-md);
        }

        .feature-box {
            padding-left: var(--s-sm);
            border-left: 2px solid var(--c-border);
            transition: border-color var(--t-base) var(--ease);
        }

        .feature-box:hover {
            border-color: var(--se-pink);
        }

        .feature-box h3 {
            font-family: var(--font-product);
            font-size: 1rem;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .feature-box p {
            font-size: 0.9rem;
            color: var(--c-dim);
            line-height: 1.6;
        }

        /* Footer */
        .footer {
            padding: var(--s-xl) 0 var(--s-lg);
            border-top: 1px solid var(--c-border);
            text-align: center;
        }

        .footer__logo {
            font-family: var(--font-brand);
            font-size: 1.75rem;
            background: var(--gradient-se);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: var(--s-md);
            display: inline-block;
        }

        .footer__links {
            display: flex;
            justify-content: center;
            gap: var(--s-md);
            margin-bottom: var(--s-md);
        }

        .footer__link {
            color: var(--c-dim);
            text-decoration: none;
            font-size: 0.85rem;
            transition: color var(--t-fast) var(--ease);
        }

        .footer__link:hover {
            color: var(--c-cream);
        }

        .footer__credit {
            font-size: 0.75rem;
            color: var(--c-subtle);
            margin-top: var(--s-md);
        }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .header__nav {
                display: none;
            }

            .hero {
                padding-top: 96px;
            }

            .hero__product-name {
                font-size: 4rem;
            }
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header class="header">
        <div class="header__inner">
            <a href="#" class="header__logo">side effects</a>
            <nav class="header__nav">
                <a href="#demo" class="header__link">Demo</a>
                <a href="#downloads" class="header__link">Downloads</a>
                <a href="https://github.com/ashokfernandez/PolySynth" class="header__link" target="_blank">GitHub</a>
            </nav>
        </div>
    </header>

    <!-- Hero / Demo -->
    <section id="demo" class="hero">
        <div class="container">
            <div class="reveal">
                <h1 class="hero__product-name">PolySynth</h1>
                <p class="hero__description">
                    A polyphonic synthesizer modeled on classic analog hardware. Features configurable voice
                    allocation, polyphonic modulation routing, and a dedicated stereo effects section.
                </p>
            </div>

            <!-- Demo Shell -->
            <div class="demo-shell reveal reveal-delay-2">
                <iframe id="demo-frame" class="demo-frame" src="web-demo/index.html"
                    title="PolySynth Experience"></iframe>
            </div>
        </div>
    </section>

    <hr class="divider">

    <!-- Downloads -->
    <section id="downloads">
        <div class="container">
            <div class="section-header reveal">
                <span class="section-tag">Plugin</span>
                <h2 class="section-title">Get PolySynth</h2>
                <p class="section-sub">Download and install to use in your DAW of choice.</p>
            </div>

            <div class="dl-grid">
                <!-- macOS -->
                <div class="dl-card reveal reveal-delay-1">
                    <div class="dl-card__head">
                        <span class="dl-card__os">macOS</span>
                        <span class="chip">Universal</span>
                    </div>
                    <p class="dl-card__desc">Native performance for Apple Silicon and Intel. Installer package (.pkg).
                    </p>
                    <a id="download-macos" class="btn btn-primary" href="#" hidden>Download for Mac</a>
                    <span id="mac-loader" class="text-dim" style="font-size: 0.8rem;">Detecting latest release...</span>
                </div>

                <!-- Windows -->
                <div class="dl-card reveal reveal-delay-2">
                    <div class="dl-card__head">
                        <span class="dl-card__os">Windows</span>
                        <span class="chip">x64</span>
                    </div>
                    <p class="dl-card__desc">Optimized VST3 and Standalone binary. Zip archive.</p>
                    <a id="download-windows" class="btn btn-primary" href="#" hidden>Download for Windows</a>
                    <span id="win-loader" class="text-dim" style="font-size: 0.8rem;">Detecting latest release...</span>
                </div>
            </div>

            <p id="version-label" class="text-subtle"
                style="text-align: center; margin-top: var(--s-lg); font-size: 0.8rem;"></p>
        </div>
    </section>

    <hr class="divider">

    <!-- Features -->
    <section id="features">
        <div class="container">
            <div class="section-header">
                <span class="section-tag">Performance</span>
                <h2 class="section-title">Under the Hood</h2>
            </div>

            <div class="feature-grid">
                <div class="feature-box reveal">
                    <h3>SEA_DSP Core</h3>
                    <p>Proprietary DSP library built for no-compromise audio. Thread-safe, lock-free, and high
                        resolution.</p>
                </div>
                <div class="feature-box reveal reveal-delay-1">
                    <h3>Dual Osc + LFO</h3>
                    <p>Band-limited waveforms with cross-modulation, sync, and per-voice modulation routing.</p>
                </div>
                <div class="feature-box reveal reveal-delay-2">
                    <h3>24dB Filter</h3>
                    <p>Zero-delay feedback state-variable filter with high resonance stability and character.</p>
                </div>
                <div class="feature-box reveal reveal-delay-3">
                    <h3>CI-Verified</h3>
                    <p>Every single line of DSP is verified against golden masters in a headless CI environment.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <a href="#" class="footer__logo">side effects</a>
            <div class="footer__links">
                <a href="https://www.instagram.com/side.effects.audio" class="footer__link"
                    target="_blank">Instagram</a>
                <a href="https://github.com/ashokfernandez/PolySynth" class="footer__link" target="_blank">GitHub</a>
                <a href="component-gallery/index.html" class="footer__link">Library</a>
            </div>
            <p class="footer__credit">&copy; 2026 Side Effects Audio. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Reveal animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = "1";
                    entry.target.style.animationPlayState = "running";
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // Release fetch - Automatic via GitHub API
        (async () => {
            const macBtn = document.getElementById('download-macos');
            const winBtn = document.getElementById('download-windows');
            const macLdr = document.getElementById('mac-loader');
            const winLdr = document.getElementById('win-loader');
            const version = document.getElementById('version-label');

            const REPO = "ashokfernandez/PolySynth";

            try {
                const r = await fetch(`https://api.github.com/repos/${REPO}/releases/latest`);
                if (!r.ok) throw new Error("API fail");
                const d = await r.json();

                const tag = d.tag_name;
                version.textContent = `Latest Release: ${tag}`;

                d.assets.forEach(asset => {
                    const name = asset.name.toLowerCase();
                    const url = asset.browser_download_url;

                    if (name.includes('mac') || name.endsWith('.pkg')) {
                        macBtn.href = url;
                        macBtn.hidden = false;
                        macLdr.hidden = true;
                    }
                    if (name.includes('win') || name.includes('windows') || (name.includes('vst3') && name.endsWith('.zip'))) {
                        winBtn.href = url;
                        winBtn.hidden = false;
                        winLdr.hidden = true;
                    }
                });
            } catch (e) {
                console.warn("Release meta fetch failed, falling back to manual links.");
                // Fallback or just hide loaders
                macLdr.textContent = "Latest build on GitHub";
                winLdr.textContent = "Latest build on GitHub";
            }
        })();
    </script>

</body>

</html>